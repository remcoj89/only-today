{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022375442,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022375471,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022375442,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022375470,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022375445,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022375479,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022375445,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022375479,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022375938}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022375939}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770022375915}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770022375954}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022375941}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022376868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022376871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022377139}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022377230}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022377247}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022377248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022377375}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022377398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022377399}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022377444}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022377460}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022377523}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022377539}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022377540}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022377555}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022377556}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022377701}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022377704}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022377822}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022377823}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022377822}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022377823}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022377824}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022377825}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022377826}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022377827}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022377998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022377998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022377999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022378000}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022378004}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770022378009}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022378135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022378136}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022378177}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022378178}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022378202}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022378460}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022378461}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022378856}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022378859}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022378868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022378869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770022378906}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022378907}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022379158}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022379158}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022379239}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022379248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022379248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022379471}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022379472}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022379472}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022379473}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022379475}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022379476}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022379503}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022379503}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022379508}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022379517}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022379517}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022379603}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022379754}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022379755}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022379803}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022379804}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022379857}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022379858}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022380035}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770022380038}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022380042}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022380043}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022380086}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022380087}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022380186}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022380186}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022380307}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022380307}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022380375}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022380480}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022380571}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022380571}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022380573}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022380583}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022380583}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022380587}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022380598}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770022380598}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"b781a7f2-db0c-412e-b903-a9ea34742fe9"},"timestamp":1770022380802}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022380836}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022380836}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022380864}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022380864}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022381115}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022381116}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770022381117}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022381129}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022381130}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022381130}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022381136}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022381137}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022381183}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022381190}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/b781a7f2-db0c-412e-b903-a9ea34742fe9/block"},"timestamp":1770022381190}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022381384}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022381402}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022381403}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022381479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022381479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022381483}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022381489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022381490}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022381660}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022381660}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022381661}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022381661}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770022381665}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022381670}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022381670}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022381763}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022381764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022381764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022381765}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022381766}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022381767}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022381791}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022381791}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022381945}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022381945}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022382065}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022382066}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022382068}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022382077}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022382199}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022382199}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022382201}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770022382205}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022382214}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/97137fea-d821-4521-9571-3f81dd8993fd/block"},"timestamp":1770022382214}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022382380}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022382467}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022382467}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022382521,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022382567,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022382720}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022382720}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022382721}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022382721}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022382722}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022382723}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022382969}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022382973}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022382977}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022382978}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022383014,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022383063,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022383103}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383114}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022383115}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022383245}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022383398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022383399}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383471}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022383472}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022383473}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022383490}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770022383490}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022383489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022383685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022383685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022383688}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022383766}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770022383772}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770022383776}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770022383777}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022383778}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383778}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022383778}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022383780}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770022383784}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383788}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/b781a7f2-db0c-412e-b903-a9ea34742fe9/unblock"},"timestamp":1770022383788}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022383789}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/97137fea-d821-4521-9571-3f81dd8993fd/unblock"},"timestamp":1770022383790}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022383990}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022383992}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022384005}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022384006}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022384054}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022384055}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022384079}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022384080}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022384282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022384283}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022384293}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022384294}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022384327}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022384327}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022384328}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022384328}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022384330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022384330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022384383}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022384383}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022384384}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022384384}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022384385}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022384386}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022384572}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022384572}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022384581}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022384582}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022384585}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022384684}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022384837}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022384851}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022384851}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022384858}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022384859}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022384984}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022385088}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770022385091}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022385096}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022385096}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022385097}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022385134}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022385135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022385142}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022385143}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770022385143}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022385273}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblock","data":{},"timestamp":1770022385277}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022385282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022385283}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022385526}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022385572}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022385573}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022385874}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022385872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022385872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022385873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblockedDevices","data":{"status":200},"timestamp":1770022385880}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.beforeDelete","data":{"createdUserId":"b781a7f2-db0c-412e-b903-a9ea34742fe9"},"timestamp":1770022385881}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022385885}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022385886}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022385887}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/b781a7f2-db0c-412e-b903-a9ea34742fe9"},"timestamp":1770022385887}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022386111,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022386135,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022386164}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022386164}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022386185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022386185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022386439}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022386439}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022386440}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022386449}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022386449}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022386478}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022386479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022386479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022386479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022386481}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022386566,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022386588,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022386728}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022386729}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022386775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022387002}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022387003}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022387005}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022387013}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022387014}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022387015}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022387228}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterDelete","data":{},"timestamp":1770022387235}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022387495,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022387527,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H16","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterSettingsCheck","data":{"hasSettings":false},"timestamp":1770022387592}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022387698}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022387941,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022387965,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022388249}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022388250}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022388250}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022388358}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022388362}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770022388362}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022388634}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022388635}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022388894}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022388894}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022388895}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022388895}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435394,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435422,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435396,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435424,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435394,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435394,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435428,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435428,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435940,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435965,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022435942,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022435969,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022471107,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022471142,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022471116,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022471148,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022471117,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022471151,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022471126,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022471160,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022471500}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022471502}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770022471473}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770022471480}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022471504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022472537}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022472554}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022472555}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022472568}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022472583}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022472584}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022472836}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022472838}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022472855}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022472860}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022472861}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022472865}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022472866}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022473101}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022473102}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022473103}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022473103}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022473104}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022473106}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022473138}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022473139}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022473152}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022473152}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022473140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022473140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022473143}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770022473152}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022473446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022473447}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022473459}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022473460}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022473764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022473765}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022473889}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022473897}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022473897}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022474052}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022474185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022474185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022474307}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022474309}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022474425}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022474433}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022474434}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022474461}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022474462}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022474462}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022474462}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022474464}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022474464}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022474585}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022474701}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022474701}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022474790}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022474799}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022474800}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022474827}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022474828}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022474867}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022474882}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022474999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022475000}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022475099}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022475100}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022475109}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022475110}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022475278}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770022475282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022475288}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022475289}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022475391}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022475389}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022475390}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022475550}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022475551}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022475602}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"758e291d-70b0-456b-a807-641bc4c8169f"},"timestamp":1770022475673}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022475692}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022475814}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022475815}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022475816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022475826}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022475826}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022476054}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022476060}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/758e291d-70b0-456b-a807-641bc4c8169f/block"},"timestamp":1770022476061}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022476104}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022476104}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770022476299}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022476300}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022476340}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022476340}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022476358}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022476359}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022476359}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022476371}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022476372}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022476615}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022476616}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022476617}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022476617}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022476619}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022476620}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022476626}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022476626}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022476747}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022476755}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022476755}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022476893}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022476894}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022476895}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770022476899}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022476903}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022476905}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022476905}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022477027}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022477041}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022477041}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022477174}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022477174}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022477184}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022477336}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022477337}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022477340}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022477432}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022477433}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022477435}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770022477439}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022477447}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/fec0854f-bfde-465f-8972-b14fd32642dd/block"},"timestamp":1770022477447}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022477727}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022477728}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022477745}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022477749}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022477750}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022477986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022477986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022477986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022477986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022477987}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022477987}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022478002}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022478008}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770022478009}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022478030}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770022478030}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022478261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022478274}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022478275}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770022478310}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770022478311}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022478312}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022478321}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/758e291d-70b0-456b-a807-641bc4c8169f/unblock"},"timestamp":1770022478322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022478408}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022478418}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022478418}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022478545}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022478574}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022478574}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770022478575}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022478597}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022478598}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022478710}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022478710}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022478833}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022478869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022478869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022478870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022478870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022478871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022478872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022478989}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022478990}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022478992}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022479055}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770022479059}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022479066}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022479067}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022479068}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770022479073}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022479078}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/fec0854f-bfde-465f-8972-b14fd32642dd/unblock"},"timestamp":1770022479079}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022479101}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022479142}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022479351}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022479351}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022479414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022479607}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022479608}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022479608}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022479608}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022479610}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022479611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022479685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblock","data":{},"timestamp":1770022479688}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022479695}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022479696}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022479875}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022479889,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022479913,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022479971}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022479972}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022480140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480226}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022480227}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022480229}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022480262}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022480263}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022480263}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblockedDevices","data":{"status":200},"timestamp":1770022480267}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.beforeDelete","data":{"createdUserId":"758e291d-70b0-456b-a807-641bc4c8169f"},"timestamp":1770022480268}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480272}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/758e291d-70b0-456b-a807-641bc4c8169f"},"timestamp":1770022480272}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480246}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022480246}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022480405}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770022480408}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480413}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022480414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022480414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022480545}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022480546}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022480703}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022480705}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480719}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022480720}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022480813}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022480816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022480817}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022480818}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022480818}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022480820}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022480984}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022480985}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022480990}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022480990}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022481104}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022481170,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022481198,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022481257}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022481257}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022481264}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022481264}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022481524}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022481525}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022481532}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022481533}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022481532}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterDelete","data":{},"timestamp":1770022481536}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022481580}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022481580}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022481581}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022481973}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022481974}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H16","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterSettingsCheck","data":{"hasSettings":false},"timestamp":1770022481980}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022481983}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022481983}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770022481984}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022482719}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022482725}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770022482726}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022482734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022482742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022482743}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022483012}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022483012}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022483020}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022483021}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022483282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022483282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022483283}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022483296}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022483296}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022483312}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022483312}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022483313}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022483313}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022483564}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022483564}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022483827}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022483828}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022483829}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022483838}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022483838}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022483839}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491491,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491530,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491484,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491523,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491486,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491529,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491482,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491521,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491484,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491508,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491539,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491543,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022491492,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022491529,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022492011,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022492043,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022492095}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022492095}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022492096}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022492096}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022492097}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770022492079}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770022492108}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022492097}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022492118}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022492119}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022492646}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022492647}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022492660}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022492661}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022492798}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022492803}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022492937}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022492937}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022492942}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022492943}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022493089}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022493223}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022493223}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493228}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022493228}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022493244}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493260}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022493261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022493310}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493331}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022493332}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022493401}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022493416}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022493476}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022493491}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022493492}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022493490}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493500}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022493500}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022493547}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022493548}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022493769}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022493769}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022493776}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022493777}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770022493777}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022493787}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022493789}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022493816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022493816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022493839}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022493839}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022493840}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022493840}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022493842}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770022493847}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022494084}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022494084}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022494092}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022494093}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022494086}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022494087}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022494089}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022494090}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022494180}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022494554}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022494555}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022494558}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022494567}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022494567}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022494606}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022494613}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022494613}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022494843}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022494844}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022494890}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022494891}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022494908}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022494908}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770022494929}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022494930}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022495094,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022495115,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022495130}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022495130}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022495131}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022495138}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022495138}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022495186}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022495199}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022495199}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022495200}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022495200}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022495201}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022495201}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022495357}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022495358}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022495367}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022495367}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022495405}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022495406}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022495550,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022495572,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022495588}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022495589}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022495589}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022495592}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022495592}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022495635}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022495635}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022495664}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022495675}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022495675}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022495676}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022495681}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022495682}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022495682}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022495840}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022495840}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022495841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022495872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022495873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022495875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022495876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022495897}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022495897}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022496170}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022496162}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022496162}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022496174}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"0b7ec6f3-0f0a-4dc2-b33f-dd46a7ed3816"},"timestamp":1770022496456}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022496472}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770022496476}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022496481}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022496481}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022496665}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022496675}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770022496675}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022496775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022496775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022496833}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022496841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/0b7ec6f3-0f0a-4dc2-b33f-dd46a7ed3816/block"},"timestamp":1770022496841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022496927}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022496928}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022497065}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022497066}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022497067}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022497076}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022497076}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022497134}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022497135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022497145}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022497151}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022497152}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022497193}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022497194}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770022497195}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022497385}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022497386}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022497429}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022497430}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022497423}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022497424}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022497424}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022497425}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022497426}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022497426}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022497456}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022497732}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022497733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022497733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022497733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022497734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022497733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022497733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022497738}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022497743}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022497744}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022498024}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022498070}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022498070}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022498360}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022498360}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022498361}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770022498365}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022498372}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022498372}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022498582}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022498590}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022498591}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022498656}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022498656}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022498737}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022498745}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022498746}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022498876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770022498877}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022498945}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022498946}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022498947}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770022498950}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022498957}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/d0d2a2a7-4c81-4193-a345-5e7d811a3236/block"},"timestamp":1770022498958}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022499012}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022499012}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770022499149}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770022499150}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022499151}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022499159}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/0b7ec6f3-0f0a-4dc2-b33f-dd46a7ed3816/unblock"},"timestamp":1770022499159}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022499247}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022499248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022499269}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022499270}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022499272}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022499442}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022499443}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022499537}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022499538}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022499538}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022499538}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022499539}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022499540}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022499727}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022499732}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022499733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022499733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022499735}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022499736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022499825}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022500027}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022500125}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022500311}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022500594}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblock","data":{},"timestamp":1770022500597}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022500604}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022500604}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022500721}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770022500726}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022500733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022500734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022500735}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770022500741}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022500749}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/d0d2a2a7-4c81-4193-a345-5e7d811a3236/unblock"},"timestamp":1770022500750}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022500885}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022500885}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022501042}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022501044}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022501045}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022501173}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022501174}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022501175}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblockedDevices","data":{"status":200},"timestamp":1770022501181}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.beforeDelete","data":{"createdUserId":"0b7ec6f3-0f0a-4dc2-b33f-dd46a7ed3816"},"timestamp":1770022501182}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022501189}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/0b7ec6f3-0f0a-4dc2-b33f-dd46a7ed3816"},"timestamp":1770022501190}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022501330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022501330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022501331}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022501331}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022501333}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022501334}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022501489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022501489}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022501658}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022501790}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022501791}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022501791}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022501791}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022501792}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022501964}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022502109}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022502253}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770022502256}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022502260}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022502260}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022502260}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022502503}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterDelete","data":{},"timestamp":1770022502506}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H16","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterSettingsCheck","data":{"hasSettings":false},"timestamp":1770022502982}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022503757}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022503763}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770022503764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022504058}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022504058}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022504398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022504398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022504399}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022504399}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752356,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752394,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752356,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752390,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752355,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752391,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752355,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752397,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752355,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752394,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752358,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752395,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752353,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752390,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022752853,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022752882,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022752950}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022752951}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022752953}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022752955}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022752956}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770022752939}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022752952}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022752975}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022752976}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770022752967}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022753467}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022753469}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022753482}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022753483}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022753759}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022753760}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022753766}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022753767}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022753947}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022753949}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022754050}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022754056}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022754056}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754064}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022754064}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754073}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022754075}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022754095}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754116}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022754117}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022754358}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022754359}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022754362}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754368}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022754369}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022754363}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022754366}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754377}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022754379}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022754390}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022754391}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022754666}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022754667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022754670}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022754671}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022754672}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022754673}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022754682}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022754685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022754679}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022754683}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022754680}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022754678}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022754678}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770022754688}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022754682}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022754683}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022754678}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022754679}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022754708}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770022754734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022754975}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022754975}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022755109}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022755110}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022755380}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022755385}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022755386}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022755397}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022755500}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022755507}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022755509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022755510}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022755515}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022755516}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022755656}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022755786}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022755786}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022755796}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022755796}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022755868,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022755892,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022756043}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022756049}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022756049}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022756063}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022756063}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022756063}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022756070}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022756070}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022756070}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022756071}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022756071}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022756071}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022756073}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022756073}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022756115}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022756266}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022756271}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022756272}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022756331}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022756332}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022756355}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022756356}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022756446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022756447}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022756494}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022756499,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022756532,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022756546}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022756546}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022756601}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022756602}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022756633}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022756633}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022756634}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022756640}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022756641}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022756641}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022756738}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022756739}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022756806}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022756807}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022756869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022756870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022756871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022756932}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770022756936}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022756942}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022756943}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022757031}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022757092}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022757224}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022757224}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"5913b4c3-efcb-41fd-82af-89a656e9b424"},"timestamp":1770022757313}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022757504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022757504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022757505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022757512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022757512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022757682}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022757690}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/5913b4c3-efcb-41fd-82af-89a656e9b424/block"},"timestamp":1770022757691}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022757775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022757775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770022757950}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022757951}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022758046}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022758046}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022758047}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022758050}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022758050}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022758072}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022758076}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022758077}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022758131}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022758132}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022758322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022758322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022758365}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022758365}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022758407}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022758407}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022758408}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022758408}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022758410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022758411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022758592}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022758592}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022758593}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770022758596}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022758601}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022758602}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022758642}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022758642}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022758645}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022758688}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022758801}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022758871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022758871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022758966}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022759160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022759160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022759162}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770022759165}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022759173}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/d4977c3f-5826-4ae9-bffb-d169638252ca/block"},"timestamp":1770022759174}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022759446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022759447}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022759521}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022759525}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022759525}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022759629}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022759639}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022759639}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022759724}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022759724}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022759725}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022759725}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022759726}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022759727}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022759803}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770022759803}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022759917}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022759918}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022759991}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770022760078}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770022760078}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022760079}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022760143}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022760155}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770022760155}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022760187}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022760188}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022760190}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022760263}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022760811}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022760811}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022760832}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770022760837}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022760843}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022760843}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022760843}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022760845}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770022760849}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022760850}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770022760851}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022760855}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/d4977c3f-5826-4ae9-bffb-d169638252ca/unblock"},"timestamp":1770022760855}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022761099}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022761100}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770022761101}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022761122}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022761123}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022761128}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022761128}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022761386}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022761387}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022761388}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022761388}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022761389}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022761390}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022761391}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022761411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022761411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022761411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022761412}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022761658}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022761686}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022761931}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022762006}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022762203}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770022762206}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022762577}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022762585}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022762586}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022762860}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022762861}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022763134}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022763134}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022763135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblockedDevices","data":{"status":200},"timestamp":1770022763140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.beforeDelete","data":{"userId":"d4977c3f-5826-4ae9-bffb-d169638252ca"},"timestamp":1770022763141}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022763145}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/d4977c3f-5826-4ae9-bffb-d169638252ca"},"timestamp":1770022763145}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022763418}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022763419}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022763684}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022763685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022763685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022763686}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022763687}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022763970}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022764442}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDelete","data":{},"timestamp":1770022764446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022764451}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022764452}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022764825}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.fallback","data":{"hasUser":false,"hasError":true,"isBlocked":false},"timestamp":1770022765085}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022765086}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDeletedDevices","data":{"status":401},"timestamp":1770022765089}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022906011,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022906038,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022906013,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022906043,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022906012,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022906044,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022906016,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022906048,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022906577}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022906579}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770022906551}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770022906581}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022906581}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022907432}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022907435}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022907736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022907876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022907881}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022907901}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022907902}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022907903}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022907905}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022908015}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022908028}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022908098}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022908112}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022908113}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022908179}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022908185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022908196}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022908198}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022908380}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022908380}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022908459}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022908460}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022908462}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022908463}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022908464}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022908466}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022908503}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022908504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022908505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770022908505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770022908509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770022908518}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022908644}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022908645}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022908747}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022908823}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022908823}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022909185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022909185}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022909271}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022909279}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770022909280}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022909440}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770022909531}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022909532}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022909565}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022909565}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022909800}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022909808}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022909809}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022909869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022909869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022909870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022909870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770022909871}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770022909872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022909942}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022909952}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022909953}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022910068}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022910068}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022910234}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022910248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022910248}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022910260}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770022910261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022910330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022910330}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022910515}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022910515}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770022910559}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770022910560}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022910606}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770022910611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022910616}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022910617}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770022910797}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022910843}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022910873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022910874}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"b4a72237-21ea-4632-ab81-9432078c8018"},"timestamp":1770022911129}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022911149}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022911149}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022911150}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022911159}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022911160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022911213}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022911224}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770022911225}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022911428}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022911428}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022911495}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022911495}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022911512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022911521}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/b4a72237-21ea-4632-ab81-9432078c8018/block"},"timestamp":1770022911521}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022911689}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022911690}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022911691}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022911700}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022911700}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022911762}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022911762}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770022911764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022911797}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022911804}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022911804}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022911805}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022911806}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022911997}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022911998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770022912027}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022912063}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022912064}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022912125}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022912126}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022912127}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022912127}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022912129}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022912130}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022912261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022912261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022912261}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770022912264}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022912267}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022912267}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022912303}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022912333}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022912336}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022912343}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022912422}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022912528}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022912528}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022912708}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022913053,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022913107,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022913138}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022913138}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022913139}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770022913143}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913148}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/8bb7c7ae-7516-4b5e-95d0-6c09fbd58c22/block"},"timestamp":1770022913149}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022913282}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913287}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022913287}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022913328}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913336}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770022913336}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022913410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022913411}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022913466,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022913516,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022913565}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770022913565}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022913614}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022913615}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022913667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022913667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022913668}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022913668}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022913669}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770022913669}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913850}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022913852}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770022913860}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770022913860}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022913863}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022913853}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913874}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/b4a72237-21ea-4632-ab81-9432078c8018/unblock"},"timestamp":1770022913875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022913876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022913876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022913878}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022913920}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022913876}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022913877}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022914160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022914160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022914208}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022914351}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022914353}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022914370}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022914372}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022914443}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022914444}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022914444}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022914445}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022914446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022914446}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022914649}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022914649}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022914661}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022914661}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022914722}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770022914728}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022914729}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022914733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022914734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022914736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770022914741}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022914746}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/8bb7c7ae-7516-4b5e-95d0-6c09fbd58c22/unblock"},"timestamp":1770022914746}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022914926}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022914927}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022914934}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022914934}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022915006}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022915007}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022915011}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022915224}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022915224}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022915231}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022915231}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022915262}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022915262}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022915263}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022915263}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022915264}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770022915264}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022915289}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblock","data":{},"timestamp":1770022915294}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022915301}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022915302}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022915504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022915505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022915512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022915512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770022915513}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022915517}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022915589}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022915589}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022915630}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022915779}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022915868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022915868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022915870}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblockedDevices","data":{"status":200},"timestamp":1770022915875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.beforeDelete","data":{"createdUserId":"b4a72237-21ea-4632-ab81-9432078c8018"},"timestamp":1770022915875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022915881}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/b4a72237-21ea-4632-ab81-9432078c8018"},"timestamp":1770022915881}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022916040}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770022916043}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022916165}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022916165}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022916287}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770022916309}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022916310}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022916393}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022916410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022916410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022916449}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022916450}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022916450}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022916450}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022916451}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022916586}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022916587}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022916676}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022916676}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022916751}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022916707,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022916763,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022916856}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022916856}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022916858}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022916873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770022916874}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022916940}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022916940}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770022916941}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblockedDevices","data":{"status":200},"timestamp":1770022916944}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.beforeDelete","data":{"userId":"8bb7c7ae-7516-4b5e-95d0-6c09fbd58c22"},"timestamp":1770022916945}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022916950}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/8bb7c7ae-7516-4b5e-95d0-6c09fbd58c22"},"timestamp":1770022916950}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022917166}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022917167}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022917193}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterDelete","data":{},"timestamp":1770022917196}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022917216}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022917217}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022917436}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022917437}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770022917438}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022917442}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022917442}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022917442}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022917556}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022917556}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022917557}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022917557}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770022917558}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770022917827}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022918017,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022918042,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770022918281}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDelete","data":{},"timestamp":1770022918284}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022918289}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770022918290}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770022918711}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.fallback","data":{"hasUser":false,"hasError":true,"isBlocked":false},"timestamp":1770022918986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022918987}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDeletedDevices","data":{"status":401},"timestamp":1770022918993}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H16","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterSettingsCheck","data":{"hasSettings":false},"timestamp":1770022919026}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022919560,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022919584,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770022919801}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770022919842}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770022919857}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770022919858}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770022920046,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770022920071,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770022920140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770022920140}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770022920324}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770022920325}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770022920326}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770022920410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770022920410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770022920411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770022920411}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791037,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791073,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791037,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791073,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791039,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791081,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791043,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791096,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791043,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791108,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791039,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791082,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791044,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791145,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023791608,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023791646,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023791738}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023791739}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770023791747}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023791748}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023791741}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.start","data":{},"timestamp":1770023791717}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023791749}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.start","data":{"nodeEnv":"test"},"timestamp":1770023791750}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023791772}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023791772}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023792414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023792415}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023792421}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023792422}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:register","message":"register.signup.result","data":{"hasUser":true,"hasSession":true,"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770023792653}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770023792656}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023792702}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023792703}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023792709}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023792709}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770023792935}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023792998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023792998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793008}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023793008}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023793010}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793036}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770023793037}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770023793253}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770023793268}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023793289}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023793299}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023793299}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793301}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770023793302}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793304}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023793305}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023793333}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023793335}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023793343}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793355}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023793357}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023793578}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023793578}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023793582}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023793582}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":429,"code":"RATE_LIMITED"},"timestamp":1770023793582}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023793579}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023793580}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023793599}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023793599}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023793599}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023793600}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770023793601}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770023793601}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023793645}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023793645}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023793866}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023793866}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770023793867}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.missingContext","data":{"hasUserEmail":true,"adminEmailsCount":0},"timestamp":1770023793867}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":403,"code":"FORBIDDEN"},"timestamp":1770023793869}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.start","data":{},"timestamp":1770023793875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023793956}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023793956}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023793960}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770023793961}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023794042}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770023794225}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770023794225}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023794360}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770023794368}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023794369}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023794509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023794602}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023794612}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users"},"timestamp":1770023794613}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023794666}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023794667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":false,"hasUser":false,"hasError":true,"errorStatus":400,"errorCode":"invalid_credentials"},"timestamp":1770023794793}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023794793}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023794873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023794878}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770023794878}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023794890}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023794891}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023794882,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023794912,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023794951}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023794951}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023794952}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023794961}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770023794962}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770023795081}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023795135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023795136}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023795158}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023795159}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023795159}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023795160}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users","message":"admin.createUser.request","data":{"hasUserId":true,"hasEmail":true},"timestamp":1770023795161}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.start","data":{"hasEmail":true,"passwordLength":16},"timestamp":1770023795161}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023795257}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023795257}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023795312}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023795316}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770023795317}
{"location":"vitest.setup.ts:8","message":"env file presence","data":{"cwd":"/home/remco/code/remcoj89/personal-projects/saas/only-today","envPath":".env.test","envExists":true,"envSize":790},"timestamp":1770023795352,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"location":"vitest.setup.ts:24","message":"dotenv loaded .env.test","data":{"parsedKeys":["SUPABASE_URL","SUPABASE_KEY","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","DATABASE_URL","SUPABASE_TEST_USER_PASSWORD","SUPABASE_TEST_USER_EMAIL","NODE_ENV"],"error":null,"hasSupabaseUrl":true,"hasDatabaseUrl":true},"timestamp":1770023795378,"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1"}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023795398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023795398}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023795502}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.auth.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023795526}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.start","data":{"hasUserId":true},"timestamp":1770023795527}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023795540}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023795541}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770023795542}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023795549}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023795549}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023795550}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023795611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023795611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770023795680}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterSettings","data":{},"timestamp":1770023795681}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770023795685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023795685}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":false,"hasDeviceId":false},"timestamp":1770023795770}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/protected"},"timestamp":1770023795771}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023795772}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/userService.ts:createUserSettings","message":"createUserSettings.result","data":{"hasData":true,"hasError":false,"errorCode":null},"timestamp":1770023795804}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"services/adminService.ts:createUser","message":"createUser.settings.done","data":{"hasUserId":true},"timestamp":1770023795805}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023795899}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023795899}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023795944}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023795944}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023796076}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H9","location":"routes/settings.ts:patch","message":"settings.patch.result","data":{"hasSettings":true},"timestamp":1770023796198}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023796206}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023796206}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023796207}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":true},"timestamp":1770023796215}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023796215}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterCreate","data":{"createdUserId":"c5b4d142-b9b5-4692-99fa-42c2aa8c74f2"},"timestamp":1770023796355}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023796468}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023796471}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023796472}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023796479}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/logout"},"timestamp":1770023796480}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023796727}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023796729}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023796729}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023796736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023796738}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023796738}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023796740}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/c5b4d142-b9b5-4692-99fa-42c2aa8c74f2/block"},"timestamp":1770023796741}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023796740}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023796741}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023796998}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023796999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023797000}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023797001}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.start","data":{"hasUserId":true},"timestamp":1770023796999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023797020}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023797020}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"routes/auth.ts:logout","message":"logout.signout.result","data":{"hasError":false,"errorStatus":null,"errorCode":null,"errorMessage":null},"timestamp":1770023797304}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023797306}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023797305}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023797306}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023797307}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023797308}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023797310}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770023797311}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023797314}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023797315}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023797316}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023797316}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770023797317}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDevices","data":{"deviceCount":2},"timestamp":1770023797322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023797326}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/device-1"},"timestamp":1770023797327}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023797611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023797611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023797611}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023797612}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023797612}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023797612}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023797872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023797872}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:delete","message":"devices.delete.entry","data":{"hasUserId":true,"hasDeviceId":true},"timestamp":1770023797873}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H15","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterRevokeDevice","data":{"status":200},"timestamp":1770023797875}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023797878}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/7004d8ef-7ee8-4325-a34d-40747deb4ec7/block"},"timestamp":1770023797878}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023797904}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023797923}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023797923}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770023797926}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023798148}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023798148}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023798410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023798410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023798410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023798410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/block","message":"admin.blockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023798411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":true},"timestamp":1770023798411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023798452}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023798458}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023798459}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023798665}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023798742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":true},"timestamp":1770023798742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023798923}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023798975}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023798985}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"PATCH","path":"/"},"timestamp":1770023798986}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":true},"timestamp":1770023799147}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.blockedAdmin","data":{"method":"GET","path":"/"},"timestamp":1770023799147}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023799147}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023799155}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/c5b4d142-b9b5-4692-99fa-42c2aa8c74f2/unblock"},"timestamp":1770023799155}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023799276}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023799276}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023799459}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023799463}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023799463}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlock","data":{"status":200},"timestamp":1770023799462}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023799466}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023799467}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023799468}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterBlockedDevices","data":{"status":401},"timestamp":1770023799471}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023799474}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"POST","path":"/users/7004d8ef-7ee8-4325-a34d-40747deb4ec7/unblock"},"timestamp":1770023799475}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023799568}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023799569}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":400,"code":"VALIDATION_ERROR"},"timestamp":1770023799571}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023799742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023799743}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023799742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023799742}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023799743}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023799743}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023799744}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770023799744}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023800004}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023800004}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023800005}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023800005}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:post:/users/:id/unblock","message":"admin.unblockUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023800007}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.start","data":{"hasUserId":true,"blocked":false},"timestamp":1770023800008}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023800024}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.fetch.result","data":{"hasUser":true,"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023800269}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023800303}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H3","location":"services/adminService.ts:updateBlockedStatus","message":"updateBlockedStatus.update.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023800542}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023800573}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblock","data":{},"timestamp":1770023800575}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023800580}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023800581}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023800806}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblock","data":{"status":200},"timestamp":1770023800811}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023800852}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023800853}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023801128}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023801129}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023801129}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterUnblockedDevices","data":{"status":200},"timestamp":1770023801135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.beforeDelete","data":{"createdUserId":"c5b4d142-b9b5-4692-99fa-42c2aa8c74f2"},"timestamp":1770023801135}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023801141}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/c5b4d142-b9b5-4692-99fa-42c2aa8c74f2"},"timestamp":1770023801141}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023801175}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023801189}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023801190}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023801381}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023801417}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023801417}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023801452}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023801452}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023801697}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023801697}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023801698}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023801698}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023801701}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023801733}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023801734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H10","location":"routes/devices.ts:get","message":"devices.get.entry","data":{"hasUserId":true},"timestamp":1770023801734}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H14","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterUnblockedDevices","data":{"status":200},"timestamp":1770023801736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.beforeDelete","data":{"userId":"7004d8ef-7ee8-4325-a34d-40747deb4ec7"},"timestamp":1770023801736}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023801739}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"DELETE","path":"/users/7004d8ef-7ee8-4325-a34d-40747deb4ec7"},"timestamp":1770023801740}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023801979}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023801999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023801999}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023802258}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023802258}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023802258}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023802259}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H5","location":"routes/admin.ts:delete:/users/:id","message":"admin.deleteUser.request","data":{"hasUserId":true,"hasTargetId":true},"timestamp":1770023802259}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023802407}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H12","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterDelete","data":{},"timestamp":1770023802410}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"services/adminService.ts:deleteUser","message":"deleteUser.result","data":{"hasError":false,"errorCode":null,"errorStatus":null},"timestamp":1770023802532}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H16","location":"admin.test.ts:allows admin to create, block/unblock, and delete users","message":"adminFlow.afterSettingsCheck","data":{"hasSettings":false},"timestamp":1770023802814}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"services/adminService.ts:logAdminAction","message":"logAdminAction.result","data":{"hasError":false,"errorCode":null},"timestamp":1770023802940}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDelete","data":{},"timestamp":1770023802942}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023802945}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/"},"timestamp":1770023802946}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":false,"hasError":true,"errorStatus":403},"timestamp":1770023803338}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H8","location":"routes/auth.ts:login","message":"login.result","data":{"hasSession":true,"hasUser":true,"hasError":false,"errorStatus":null,"errorCode":null},"timestamp":1770023803554}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H6","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.start","data":{"hasAuthHeader":true,"hasDeviceId":false},"timestamp":1770023803570}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H21","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.request","data":{"method":"GET","path":"/documents"},"timestamp":1770023803571}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.fallback","data":{"hasUser":false,"hasError":true,"isBlocked":false},"timestamp":1770023803613}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H22","location":"errors/errorHandler.ts:errorHandler","message":"errorHandler.appError","data":{"status":401,"code":"UNAUTHORIZED"},"timestamp":1770023803614}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H11","location":"auth.integration.test.ts:runs full user lifecycle","message":"lifecycle.afterDeletedDevices","data":{"status":401},"timestamp":1770023803621}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H7","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.getUser.result","data":{"hasUser":true,"hasError":false,"errorStatus":null},"timestamp":1770023803858}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.userMetadata","data":{"hasUser":true,"isBlocked":false},"timestamp":1770023803859}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H18","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.adminUser.result","data":{"hasUser":true,"hasError":false,"isBlocked":false},"timestamp":1770023804168}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H17","location":"middleware/auth.ts:authMiddleware","message":"authMiddleware.allowed","data":{},"timestamp":1770023804169}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.start","data":{"hasUserEmail":true,"adminEmailsCount":1},"timestamp":1770023804169}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H13","location":"middleware/adminAuth.ts:adminAuthMiddleware","message":"adminAuth.allowed","data":{"adminEmailsCount":1},"timestamp":1770023804169}
